# –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ø–ª–æ—è AutoVed

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ AutoVed, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –¥–µ–ø–ª–æ—è, Docker, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ñ–∞–π–ª–æ–≤ –∏ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö –¥–ª—è –≤–æ—Å—Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
2. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ñ–∞–π–ª–æ–≤ (S3)](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞-—Ñ–∞–π–ª–æ–≤-s3)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-telegram)
6. [Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
7. [Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#nextjs-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
8. [TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#typescript-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
9. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
10. [API –º–∞—Ä—à—Ä—É—Ç—ã](#api-–º–∞—Ä—à—Ä—É—Ç—ã)
11. [–°–∫—Ä–∏–ø—Ç—ã –∏ –∫–æ–º–∞–Ω–¥—ã](#—Å–∫—Ä–∏–ø—Ç—ã-–∏-–∫–æ–º–∞–Ω–¥—ã)
12. [–ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è](#–ø—Ä–æ—Ü–µ—Å—Å-–¥–µ–ø–ª–æ—è)

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend

- **Framework**: Next.js 15.5.0 (App Router)
- **–Ø–∑—ã–∫**: TypeScript 5.x (—Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º)
- **UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞**: React 19.1.0, React DOM 19.1.0
- **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**: Tailwind CSS v4 (@tailwindcss/postcss)
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: GSAP 3.13.0
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º**: Zod 4.1.3

### Backend

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: MySQL 8.0+ (—á–µ—Ä–µ–∑ mysql2 3.14.4)
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤**: AWS S3 (—á–µ—Ä–µ–∑ @aws-sdk/client-s3 3.883.0)
- **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: Telegraf 4.16.3
- **Email**: Nodemailer 7.0.6 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **CORS**: cors 2.8.5

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤**: pnpm
- **–õ–∏–Ω—Ç–∏–Ω–≥**: ESLint 9.x —Å eslint-config-next 15.5.0
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker, Docker Compose
- **Node.js**: 20.x (Alpine Linux –≤ Docker)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **dotenv**: 17.2.2 (–¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- **form-data**: 4.0.4 (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ä–º–∞–º–∏)
- **multer**: 2.0.2 (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤)

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –∏–ª–∏ `.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```env
# ============================================
# –û–∫—Ä—É–∂–µ–Ω–∏–µ
# ============================================
NODE_ENV=production
NEXTAUTH_URL=https://your-domain.com

# ============================================
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL
# ============================================
DB_HOST=your_mysql_host
DB_PORT=3306
DB_USER=your_mysql_user
DB_PASSWORD=your_mysql_password
DB_NAME=autoved

# ============================================
# AWS S3 (–∏–ª–∏ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
# ============================================
S3_ENDPOINT=https://s3.twcstorage.ru
S3_BUCKET_NAME=your_bucket_name
S3_ACCESS_KEY=your_s3_access_key
S3_SECRET_KEY=your_s3_secret_key
S3_REGION=ru-1

# ============================================
# Telegram Bot –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
# ============================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id

# ============================================
# Telegram Parser Bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# ============================================
PARSER_TELEGRAM_BOT_TOKEN=your_parser_bot_token
PARSER_TELEGRAM_WEBHOOK_SECRET=your_webhook_secret
PARSER_TELEGRAM_TARGET_CHAT_ID=your_target_chat_id
PARSER_TELEGRAM_WEBHOOK_URL=https://your-domain.com
```

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `DB_HOST` - —Ö–æ—Å—Ç MySQL —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `localhost`, `127.0.0.1`, –∏–ª–∏ IP –∞–¥—Ä–µ—Å)
- `DB_PORT` - –ø–æ—Ä—Ç MySQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `3306`)
- `DB_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å MySQL
- `DB_PASSWORD` - –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è MySQL
- `DB_NAME` - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- `S3_ENDPOINT` - endpoint S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://s3.twcstorage.ru` –¥–ª—è Timeweb Cloud)
- `S3_BUCKET_NAME` - –Ω–∞–∑–≤–∞–Ω–∏–µ bucket'–∞
- `S3_ACCESS_KEY` - Access Key ID
- `S3_SECRET_KEY` - Secret Access Key
- `S3_REGION` - —Ä–µ–≥–∏–æ–Ω —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `ru-1`)

#### Telegram
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ @BotFather)
- `TELEGRAM_CHAT_ID` - ID —á–∞—Ç–∞/–∫–∞–Ω–∞–ª–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `PARSER_TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞-–ø–∞—Ä—Å–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `PARSER_TELEGRAM_WEBHOOK_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è webhook
- `PARSER_TELEGRAM_TARGET_CHAT_ID` - ID —á–∞—Ç–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- `PARSER_TELEGRAM_WEBHOOK_URL` - URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è webhook

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL

–§–∞–π–ª: `src/lib/db.ts`

```typescript
import mysql from 'mysql2/promise';

const pool = mysql.createPool({
  host: process.env.DB_HOST,
  port: parseInt(process.env.DB_PORT || '3306'),
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  database: process.env.DB_NAME,
  waitForConnections: true,
  connectionLimit: 10,
  queueLimit: 0,
});

export default pool;
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

- `waitForConnections: true` - –∂–¥–∞—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- `connectionLimit: 10` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ –ø—É–ª–µ
- `queueLimit: 0` - –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –æ—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ API endpoint:

```bash
POST /api/admin/init
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ SQL:

```bash
mysql -u your_user -p your_database < src/lib/init-db.sql
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ñ–∞–π–ª–æ–≤ (S3)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è S3 –∫–ª–∏–µ–Ω—Ç–∞

–§–∞–π–ª: `src/lib/s3.ts`

```typescript
import { S3Client } from '@aws-sdk/client-s3';

const s3Client = new S3Client({
  region: process.env.S3_REGION || 'ru-1',
  endpoint: process.env.S3_ENDPOINT || 'https://s3.twcstorage.ru',
  credentials: {
    accessKeyId: process.env.S3_ACCESS_KEY || '',
    secretAccessKey: process.env.S3_SECRET_KEY || '',
  },
  forcePathStyle: true, // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
});
```

### –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- `forcePathStyle: true` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â (Timeweb Cloud, MinIO –∏ —Ç.–¥.)
- `ACL: 'public-read'` - —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
- –ü—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º: `autoved/${Date.now()}-${fileName}`

### –§—É–Ω–∫—Ü–∏–∏ S3

1. **uploadFileToS3** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. **deleteFileFromS3** - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
3. **generatePresignedUploadUrl** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è presigned URL –¥–ª—è –ø—Ä—è–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB
- –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã: `image/jpeg`, `image/jpg`, `image/png`, `image/webp`, `image/gif`

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram

### –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–§–∞–π–ª: `src/lib/telegram.ts`

```typescript
import { Telegraf } from 'telegraf';

const bot = new Telegraf(process.env.TELEGRAM_BOT_TOKEN || '');
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∏–ª–∏ –∫–∞–Ω–∞–ª
4. –ü–æ–ª—É—á–∏—Ç–µ Chat ID:
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [@userinfobot](https://t.me/userinfobot) –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

### –ü–∞—Ä—Å–µ—Ä –±–æ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–§–∞–π–ª: `src/lib/telegramBot.ts`

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram –∫–∞–Ω–∞–ª–∞—Ö –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –¥–ª—è –ø–∞—Ä—Å–µ—Ä–∞

```bash
node scripts/setup-telegram-webhook.js
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ API:

```bash
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-domain.com/api/telegram/webhook",
    "secret_token": "your_webhook_secret"
  }'
```

---

## Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Dockerfile

```dockerfile
# –ò—Å–ø–æ–ª—å–∑—É–µ–º Node.js 20 Alpine –¥–ª—è –º–µ–Ω—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞
FROM node:20-alpine AS base

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
FROM base AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /app

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pnpm
RUN npm install -g pnpm

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ package —Ñ–∞–π–ª–æ–≤
COPY package.json pnpm-lock.yaml* ./
RUN pnpm install --frozen-lockfile

# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
FROM base AS builder
WORKDIR /app
RUN npm install -g pnpm

COPY --from=deps /app/node_modules ./node_modules
COPY . .

# –°–±–æ—Ä–∫–∞
RUN pnpm build

# Production –æ–±—Ä–∞–∑
FROM base AS runner
WORKDIR /app

ENV NODE_ENV=production
ENV NEXT_TELEMETRY_DISABLED=1

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public

# –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è prerender cache
RUN mkdir .next
RUN chown nextjs:nodejs .next

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ standalone —Å–±–æ—Ä–∫–∏
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs

EXPOSE 3000

ENV PORT=3000
ENV HOSTNAME="0.0.0.0"

CMD ["node", "server.js"]
```

### docker-compose.yml

```yaml
version: '3.8'

services:
  autoved-app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DB_HOST=${DB_HOST}
      - DB_PORT=${DB_PORT}
      - DB_USER=${DB_USER}
      - DB_PASSWORD=${DB_PASSWORD}
      - DB_NAME=${DB_NAME}
      - S3_ENDPOINT=${S3_ENDPOINT}
      - S3_BUCKET_NAME=${S3_BUCKET_NAME}
      - S3_ACCESS_KEY=${S3_ACCESS_KEY}
      - S3_SECRET_KEY=${S3_SECRET_KEY}
      - S3_REGION=${S3_REGION}
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID}
      - PARSER_TELEGRAM_BOT_TOKEN=${PARSER_TELEGRAM_BOT_TOKEN}
      - PARSER_TELEGRAM_WEBHOOK_SECRET=${PARSER_TELEGRAM_WEBHOOK_SECRET}
      - PARSER_TELEGRAM_TARGET_CHAT_ID=${PARSER_TELEGRAM_TARGET_CHAT_ID}
      - PARSER_TELEGRAM_WEBHOOK_URL=${PARSER_TELEGRAM_WEBHOOK_URL}
      - NEXTAUTH_URL=${NEXTAUTH_URL}
```

### Docker –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t autoved .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 3000:3000 --env-file .env.local autoved

# –ó–∞–ø—É—Å–∫ —Å Docker Compose
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

---

## Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### next.config.ts

```typescript
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Turbopack –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  turbopack: {
    root: __dirname,
  },
  
  // Standalone output –¥–ª—è Docker
  output: 'standalone',
  
  // –û—Ç–∫–ª—é—á–µ–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  images: {
    unoptimized: true,
  },
  
  // Trailing slash –¥–ª—è URL
  trailingSlash: true,
};

export default nextConfig;
```

### –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- `output: 'standalone'` - —Å–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–±–æ—Ä–∫—É –¥–ª—è Docker
- `images.unoptimized: true` - –æ—Ç–∫–ª—é—á–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Next.js (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π S3)
- `trailingSlash: true` - –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª—ç—à –≤ –∫–æ–Ω—Ü–µ URL

---

## TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º TypeScript (`strict: true`)
- Path aliases (`@/*` –¥–ª—è `./src/*`)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSX –¥–ª—è React
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

#### 1. hero_slides
–°–ª–∞–π–¥—ã –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```sql
CREATE TABLE IF NOT EXISTS hero_slides (
  id VARCHAR(255) PRIMARY KEY,
  background_image TEXT NOT NULL,
  car_name VARCHAR(255) NOT NULL,
  car_specs VARCHAR(255) NOT NULL,
  car_year VARCHAR(255) NOT NULL,
  sort_order INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 2. hero_settings
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ü–∏–∏ Hero

```sql
CREATE TABLE IF NOT EXISTS hero_settings (
  id INT PRIMARY KEY DEFAULT 1,
  title TEXT NOT NULL,
  subtitle TEXT NOT NULL,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 3. promo_settings
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º–æ-—Å–µ–∫—Ü–∏–∏

```sql
CREATE TABLE IF NOT EXISTS promo_settings (
  id INT PRIMARY KEY DEFAULT 1,
  title TEXT NOT NULL,
  subtitle TEXT NOT NULL,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 4. video_reviews
–í–∏–¥–µ–æ-–æ–±–∑–æ—Ä—ã –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

```sql
CREATE TABLE IF NOT EXISTS video_reviews (
  id VARCHAR(255) PRIMARY KEY,
  customer_name VARCHAR(255) NOT NULL,
  location VARCHAR(255) NOT NULL,
  car_model VARCHAR(255) NOT NULL,
  cover_image TEXT NOT NULL,
  vk_embed_url TEXT NOT NULL,
  action VARCHAR(255) DEFAULT '–°–º–æ—Ç—Ä–µ—Ç—å',
  sort_order INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 5. faq_items
–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã

```sql
CREATE TABLE IF NOT EXISTS faq_items (
  id VARCHAR(255) PRIMARY KEY,
  question TEXT NOT NULL,
  answer TEXT NOT NULL,
  sort_order INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 6. car_cards
–ö–∞—Ä—Ç–æ—á–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

```sql
CREATE TABLE IF NOT EXISTS car_cards (
  id VARCHAR(255) PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  engine VARCHAR(255) NOT NULL,
  drive VARCHAR(50) NOT NULL,
  modification VARCHAR(255) NOT NULL,
  distance VARCHAR(255) NOT NULL,
  image_url TEXT NOT NULL,
  external_link TEXT NOT NULL,
  price VARCHAR(255) NOT NULL,
  year VARCHAR(255) NOT NULL,
  location VARCHAR(10) NOT NULL,
  is_new BOOLEAN DEFAULT FALSE,
  date VARCHAR(255) NOT NULL,
  sort_order INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 7. cars_settings
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ü–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫

```sql
CREATE TABLE IF NOT EXISTS cars_settings (
  id INT PRIMARY KEY DEFAULT 1,
  title TEXT NOT NULL,
  subtitle TEXT NOT NULL,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

---

## API –º–∞—Ä—à—Ä—É—Ç—ã

### –ê–¥–º–∏–Ω API

#### GET /api/admin/data
–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–û—Ç–≤–µ—Ç:**
```json
{
  "hero": {
    "title": "...",
    "subtitle": "...",
    "slides": [...]
  },
  "promo": {
    "title": "...",
    "subtitle": "..."
  },
  "videoReviews": [...],
  "faq": [...],
  "cards": {
    "title": "...",
    "subtitle": "...",
    "cards": [...]
  }
}
```

#### POST /api/admin/data
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–µ–∫—Ü–∏—è—Ö

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "section": "hero" | "promo" | "videoReviews" | "faq" | "cards",
  "data": { ... }
}
```

#### POST /api/admin/init
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –≤—Å—Ç–∞–≤–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ API

#### POST /api/send-email
–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã —Å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "string",
  "phone": "string",
  "country": "string",
  "budget": "string",
  "message": "string (optional)"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!",
  "messageId": 12345,
  "telegramSent": true
}
```

#### POST /api/upload
–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ S3

**FormData:**
- `file`: File

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "url": "https://s3.../autoved/...",
  "filename": "image.jpg",
  "size": 12345,
  "type": "image/jpeg"
}
```

#### GET /api/upload
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è presigned URL –¥–ª—è –ø—Ä—è–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `filename`: string
- `contentType`: string (optional, default: "image/jpeg")

**–û—Ç–≤–µ—Ç:**
```json
{
  "uploadUrl": "https://s3.../presigned-url",
  "fileUrl": "https://s3.../autoved/..."
}
```

### Telegram API

#### POST /api/telegram/webhook
Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Telegram

#### POST /api/telegram/parse-message
–ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤

---

## –°–∫—Ä–∏–ø—Ç—ã –∏ –∫–æ–º–∞–Ω–¥—ã

### package.json scripts

```json
{
  "scripts": {
    "dev": "next dev --turbopack --port 3000",
    "build": "next build",
    "export": "next build && next export",
    "start": "next start --port 3000",
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "type-check": "tsc --noEmit",
    "setup-telegram": "node scripts/setup-telegram-webhook.js"
  }
}
```

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
pnpm dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è production
pnpm build

# –ó–∞–ø—É—Å–∫ production —Å–µ—Ä–≤–µ—Ä–∞
pnpm start

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç
pnpm export

# –õ–∏–Ω—Ç–∏–Ω–≥
pnpm lint
pnpm lint:fix

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
pnpm type-check
```

### Docker –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t autoved .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 3000:3000 --env-file .env.local autoved

# Docker Compose
docker-compose up -d
docker-compose logs -f
docker-compose down
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram webhook

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –¥–ª—è –ø–∞—Ä—Å–µ—Ä –±–æ—Ç–∞
pnpm setup-telegram
# –∏–ª–∏
node scripts/setup-telegram-webhook.js
```

---

## –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- Ubuntu 20.04+ / Debian 11+ / CentOS 8+
- Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- MySQL 8.0+ (–∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π MySQL —Å–µ—Ä–≤–µ—Ä)
- –ú–∏–Ω–∏–º—É–º 2GB RAM, 20GB –¥–∏—Å–∫–∞

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
mysql -u root -p

CREATE DATABASE autoved CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'autoved_user'@'%' IDENTIFIED BY 'strong_password';
GRANT ALL PRIVILEGES ON autoved.* TO 'autoved_user'@'%';
FLUSH PRIVILEGES;
EXIT;
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã

```bash
mysql -u autoved_user -p autoved < src/lib/init-db.sql
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

#### –°–æ–∑–¥–∞–Ω–∏–µ bucket

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ–≥–æ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π bucket (–Ω–∞–ø—Ä–∏–º–µ—Ä: `autoved-files`)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. –ü–æ–ª—É—á–∏—Ç–µ Access Key –∏ Secret Key

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```json
[
  {
    "AllowedHeaders": ["*"],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE"],
    "AllowedOrigins": ["*"],
    "ExposeHeaders": []
  }
]
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–æ–≤

#### –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É/–∫–∞–Ω–∞–ª
4. –ü–æ–ª—É—á–∏—Ç–µ Chat ID

#### –ü–∞—Ä—Å–µ—Ä –±–æ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä–æ–≥–æ –±–æ—Ç–∞
2. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–∞–Ω–∞–ª —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
3. –ü–æ–ª—É—á–∏—Ç–µ Chat ID –∫–∞–Ω–∞–ª–∞
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 5. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-username/autoved.git
cd autoved

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –°–æ–∑–¥–∞–Ω–∏–µ .env.local
cp .env.example .env.local
nano .env.local  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 6. –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π

#### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up -d --build

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞ Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t autoved:latest .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d \
  --name autoved-app \
  -p 3000:3000 \
  --env-file .env.local \
  --restart unless-stopped \
  autoved:latest
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ë–µ–∑ Docker (Node.js –Ω–∞–ø—Ä—è–º—É—é)

```bash
# –°–±–æ—Ä–∫–∞
pnpm build

# –ó–∞–ø—É—Å–∫ —Å PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
npm install -g pm2
pm2 start npm --name "autoved" -- start
pm2 save
pm2 startup
```

### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)

```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram webhook

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –¥–ª—è –ø–∞—Ä—Å–µ—Ä –±–æ—Ç–∞:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/autoved
node scripts/setup-telegram-webhook.js
```

### 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:3000/api/admin/data

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
curl -X POST http://localhost:3000/api/admin/init

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
curl http://localhost:3000/api/test-env
```

### 10. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

#### Docker –ª–æ–≥–∏

```bash
docker-compose logs -f autoved-app
```

#### PM2 –ª–æ–≥–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

```bash
pm2 logs autoved
```

#### Nginx –ª–æ–≥–∏

```bash
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
2. **CDN**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
3. **–°–∂–∞—Ç–∏–µ**: –í–∫–ª—é—á–∏—Ç–µ gzip/brotli –≤ Nginx
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus, Grafana)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **Firewall**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ UFW –∏–ª–∏ iptables
2. **SSL**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS
3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env.local`
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
5. **S3**: –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ bucket

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
mysqldump -u autoved_user -p autoved > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
mysql -u autoved_user -p autoved < backup_20240101.sql
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø (cron)

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
0 2 * * * mysqldump -u autoved_user -p'password' autoved > /backups/autoved_$(date +\%Y\%m\%d).sql
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Next.js Documentation](https://nextjs.org/docs)
- [Docker Documentation](https://docs.docker.com/)
- [MySQL Documentation](https://dev.mysql.com/doc/)
- [AWS S3 SDK](https://docs.aws.amazon.com/sdk-for-javascript/)
- [Telegraf Documentation](https://telegraf.js.org/)
- [Tailwind CSS v4](https://tailwindcss.com/docs)

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –∏ S3
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–æ–≤

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024

